<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>09-mybatis | 槲寄生</title>
    <meta name="description" content="欢迎来到我的个人空间">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/vuepress/logo.png">
  <link rel="stylesheet" href="/vuepress/layui/css/layui.css">
  <link rel="stylesheet" href="/vuepress/css/common.css">
  <script charset="utf-8" src="/vuepress/js/jquery-3.2.1.min.js"></script>
  <script charset="utf-8" src="/vuepress/layui/layui.js"></script>
  <script charset="utf-8" src="/vuepress/layui/layui.all.js"></script>
  <script charset="utf-8" src="/vuepress/js/common.js"></script>
    
    <link rel="preload" href="/vuepress/assets/css/0.styles.bf358951.css" as="style"><link rel="preload" href="/vuepress/assets/js/app.0ab85dbf.js" as="script"><link rel="preload" href="/vuepress/assets/js/2.fa597f1f.js" as="script"><link rel="preload" href="/vuepress/assets/js/17.8376b68f.js" as="script"><link rel="prefetch" href="/vuepress/assets/js/10.f6e24221.js"><link rel="prefetch" href="/vuepress/assets/js/11.9b53f862.js"><link rel="prefetch" href="/vuepress/assets/js/12.0c15f9b3.js"><link rel="prefetch" href="/vuepress/assets/js/13.c42576a8.js"><link rel="prefetch" href="/vuepress/assets/js/14.7fe4157c.js"><link rel="prefetch" href="/vuepress/assets/js/15.7511402d.js"><link rel="prefetch" href="/vuepress/assets/js/16.a91d5d90.js"><link rel="prefetch" href="/vuepress/assets/js/18.8ff81022.js"><link rel="prefetch" href="/vuepress/assets/js/19.e5f477d5.js"><link rel="prefetch" href="/vuepress/assets/js/20.5bb2e4e8.js"><link rel="prefetch" href="/vuepress/assets/js/21.d074e25d.js"><link rel="prefetch" href="/vuepress/assets/js/22.d534d55b.js"><link rel="prefetch" href="/vuepress/assets/js/23.87197592.js"><link rel="prefetch" href="/vuepress/assets/js/24.9c0c7001.js"><link rel="prefetch" href="/vuepress/assets/js/25.f96c3693.js"><link rel="prefetch" href="/vuepress/assets/js/26.fb33c535.js"><link rel="prefetch" href="/vuepress/assets/js/27.d9fee795.js"><link rel="prefetch" href="/vuepress/assets/js/28.5301b223.js"><link rel="prefetch" href="/vuepress/assets/js/29.d300dd73.js"><link rel="prefetch" href="/vuepress/assets/js/3.a40ce906.js"><link rel="prefetch" href="/vuepress/assets/js/30.d2a2c3fb.js"><link rel="prefetch" href="/vuepress/assets/js/31.f01434dc.js"><link rel="prefetch" href="/vuepress/assets/js/32.19be5ee2.js"><link rel="prefetch" href="/vuepress/assets/js/4.cd6dc910.js"><link rel="prefetch" href="/vuepress/assets/js/5.ce653b99.js"><link rel="prefetch" href="/vuepress/assets/js/6.efc95009.js"><link rel="prefetch" href="/vuepress/assets/js/7.21143678.js"><link rel="prefetch" href="/vuepress/assets/js/8.6e7ad8ff.js"><link rel="prefetch" href="/vuepress/assets/js/9.cd05ea08.js">
    <link rel="stylesheet" href="/vuepress/assets/css/0.styles.bf358951.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress/" class="home-link router-link-active"><img src="/vuepress/logo.png" alt="槲寄生" class="logo"> <span class="site-name can-hide">槲寄生</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress/java/" class="nav-link">
  java
</a></div><div class="nav-item"><a href="/vuepress/interview/" class="nav-link router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/vuepress/middleware/" class="nav-link">
  中间件
</a></div><div class="nav-item"><a href="/vuepress/devops/" class="nav-link">
  运维相关
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress/java/" class="nav-link">
  java
</a></div><div class="nav-item"><a href="/vuepress/interview/" class="nav-link router-link-active">
  面试题
</a></div><div class="nav-item"><a href="/vuepress/middleware/" class="nav-link">
  中间件
</a></div><div class="nav-item"><a href="/vuepress/devops/" class="nav-link">
  运维相关
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress/interview/docs/java/01-java基础.html" class="sidebar-link">01-java基础</a></li><li><a href="/vuepress/interview/docs/java/02-java高级.html" class="sidebar-link">02-java高级</a></li><li><a href="/vuepress/interview/docs/java/03-数据结构算法.html" class="sidebar-link">03-数据结构算法</a></li><li><a href="/vuepress/interview/docs/java/04-数据库.html" class="sidebar-link">04-数据库</a></li><li><a href="/vuepress/interview/docs/java/05-分布式架构.html" class="sidebar-link">05-分布式架构</a></li><li><a href="/vuepress/interview/docs/java/06-开发协作.html" class="sidebar-link">06-开发协作</a></li><li><a href="/vuepress/interview/docs/java/07-redis.html" class="sidebar-link">07-redis</a></li><li><a href="/vuepress/interview/docs/java/08-spring.html" class="sidebar-link">08-spring</a></li><li><a href="/vuepress/interview/docs/java/09-mybatis.html" class="active sidebar-link">09-mybatis</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress/interview/docs/java/10-dubbo.html" class="sidebar-link">10-dubbo</a></li><li><a href="/vuepress/interview/docs/java/11-springboot.html" class="sidebar-link">11-springboot</a></li><li><a href="/vuepress/interview/docs/java/12-springcloud.html" class="sidebar-link">12-springcloud</a></li><li><a href="/vuepress/interview/docs/java/13-Struts、hibernate.html" class="sidebar-link">13-Struts、hibernate</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_09-mybatis"><a href="#_09-mybatis" class="header-anchor">#</a> 09-mybatis</h1> <h3 id="_1-谈谈是mybatis？"><a href="#_1-谈谈是mybatis？" class="header-anchor">#</a> 1.谈谈是Mybatis？</h3> <p>​	Mybatis是一个半ORM（对象关系映射）框架，它内部封装了JDBC，开发时只需要关注SQL语句本身，不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程。
​	mybatis通过xml或注解的方式将要执行的各种statement配置起来，并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句，最后由mybatis框架执行sql并将结果映射为java对象并返回。</p> <h3 id="_2、mybaits的优缺点"><a href="#_2、mybaits的优缺点" class="header-anchor">#</a> 2、Mybaits的优缺点</h3> <p>​	优点：
​	（1）性能：基于SQL语句编程，直接编写原生态sql，可以严格控制sql执行性能，灵活度高。
​	（2）功能：提供映射标签，支持对象与数据库的ORM字段关系映射，自动结果封装；
​	（3）易用：与JDBC相比，消除了JDBC大量冗余的代码，不需要手动开关连接；
​	（4）拓展：很好的与各种数据库兼容，能够与Spring很好的集成；
​	
​	缺点：
​	（1）工作量：SQL语句的编写工作量较大，尤其当字段多、关联表多时，对开发人员编写SQL语句的功底有一定要求。
​	（2）移植性：SQL语句依赖于数据库，不同数据库语法上有差别，导致数据库移植性差，不能随意更换数据库。</p> <h3 id="_3-xml映射文件中，除了常见的select-insert-updae-delete标签之外，还有哪些标签？"><a href="#_3-xml映射文件中，除了常见的select-insert-updae-delete标签之外，还有哪些标签？" class="header-anchor">#</a> 3.Xml映射文件中，除了常见的select|insert|updae|delete标签之外，还有哪些标签？</h3> <p>（京东）还有很多其他的标签，<resultMap>、<parameterMap>、<sql>、<include>、<selectKey>，加上动态sql的9个标签，trim|where|set|foreach|if|choose|when|otherwise|bind等，其中<sql>为sql片段标签，通过<include>标签引入sql片段，<selectKey>为不支持自增的主键生成策略标签。</selectKey></include></sql></selectKey></include></sql></parameterMap></resultMap></p> <h3 id="_4-mybatis的一级缓存和二级缓存"><a href="#_4-mybatis的一级缓存和二级缓存" class="header-anchor">#</a> 4.MyBatis的一级缓存和二级缓存</h3> <p>​	一级缓存：sqlSession级别的缓存
​	二级缓存：namespace级别的缓存，mapper文件级别的</p> <h3 id="_5-工作原理"><a href="#_5-工作原理" class="header-anchor">#</a> 5.工作原理</h3> <p>​	1）通过SqlSessionFactoryBuilder从mybatis-config.xml配置文件中构建出SqlSessionFactory。
​	2）通过SqlSessionFactory开启一个SqlSession，通过SqlSession实例获得Mapper对象并且运行Mapper映射的Sql语句。
​	3）完成数据库的CRUD操作和事务提交，关闭SqlSession。</p> <h3 id="_6-通常一个xml映射文件，都会写一个dao接口与之对应，请问，这个dao接口的工作原理是什么？dao接口里的方法，参数不同时，方法能重载吗？"><a href="#_6-通常一个xml映射文件，都会写一个dao接口与之对应，请问，这个dao接口的工作原理是什么？dao接口里的方法，参数不同时，方法能重载吗？" class="header-anchor">#</a> 6.通常一个Xml映射文件，都会写一个Dao接口与之对应，请问，这个Dao接口的工作原理是什么？Dao接口里的方法，参数不同时，方法能重载吗？</h3> <p>​	1）在Mybatis中，每一个<insert>、<delete>、<update>、<select>标签，都会被解析为一个MapperStatement对象。
​		Mapper 接口的工作原理是JDK动态代理，Mybatis运行时会使用JDK动态代理为Mapper接口生成代理对象proxy，代理对象会拦截接口方法，转而执行MapperStatement所代表的sql，然后将sql执行结果返回。
​	2）Mapper接口里的方法，是不能重载的，因为是使用 全限名+方法名 的保存和寻找策略。
​</select></update></delete></insert></p> <h3 id="_7、mybatis是如何进行分页的？分页插件的原理是什么？"><a href="#_7、mybatis是如何进行分页的？分页插件的原理是什么？" class="header-anchor">#</a> 7、Mybatis是如何进行分页的？分页插件的原理是什么？</h3> <p>​	Mybatis：使用RowBounds对象进行分页，它是针对ResultSet结果集执行的内存分页，而非物理分页。可以在sql内直接书写带有物理分页的参数来完成物理分页功能，也可以使用分页插件来完成物理分页。
​	分页插件：使用Mybatis提供的插件接口，实现自定义插件，在插件的拦截方法内拦截待执行的sql，然后重写sql，根据dialect方言，添加对应的物理分页语句和物理分页参数。</p> <h3 id="_8-懒加载原理"><a href="#_8-懒加载原理" class="header-anchor">#</a> 8.懒加载原理</h3> <p>​	缓存关联查询的sql，当真正用到关联对象值的时候再去查出来。</p> <h3 id="_9-简述一下mybatis-的编程步骤"><a href="#_9-简述一下mybatis-的编程步骤" class="header-anchor">#</a> 9.简述一下Mybatis 的编程步骤</h3> <p>​	1）.创建 SqlSessionFactory
​	2）.通过 SqlSessionFactory 创建 SqlSession
​	3）.通过 sqlsession 调用executor执行数据库操作
​	4）.调用 session.commit()提交事务
​	5）.调用 session.close()关闭会话</p> <h3 id="_11-mybatis都有哪些executor执行器？它们之间的区别是什么？"><a href="#_11-mybatis都有哪些executor执行器？它们之间的区别是什么？" class="header-anchor">#</a> 11.Mybatis都有哪些Executor执行器？它们之间的区别是什么？</h3> <p>​	Mybatis有三种基本的Executor执行器，SimpleExecutor、ReuseExecutor、BatchExecutor。
​	SimpleExecutor：每执行一次update或select，就开启一个Statement对象，用完立刻关闭Statement对象。
​	ReuseExecutor：执行update或select，以sql作为key查找Statement对象，存在就使用，不存在就创建，用完后，不关闭Statement对象，而是放置于Map&lt;String, Statement&gt;内，供下一次使用。简言之，就是重复使用Statement对象。
​	BatchExecutor：执行update（没有select，JDBC批处理不支持select），将所有sql都添加到批处理中（addBatch()），等待统一执行（executeBatch()），它缓存了多个Statement对象，每个Statement对象都是addBatch()完毕后，等待逐一执行executeBatch()批处理。与JDBC批处理相同。</p> <h3 id="_12-mybatis是否可以映射enum枚举类？"><a href="#_12-mybatis是否可以映射enum枚举类？" class="header-anchor">#</a> 12.Mybatis是否可以映射Enum枚举类？</h3> <p>​	资料：https://www.cnblogs.com/qmillet/p/12523636.html
​		https://blog.csdn.net/a745233700/article/details/80977133
​	答：Mybatis可以映射枚举类，不单可以映射枚举类，Mybatis可以映射任何对象到表的一列上。映射方式为自定义一个TypeHandler，实现TypeHandler的setParameter()和getResult()接口方法。TypeHandler有两个作用，一是完成从javaType至jdbcType的转换，二是完成jdbcType至javaType的转换，体现为setParameter()和getResult()两个方法，分别代表设置sql问号占位符参数和获取列查询结果。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/19/2020, 2:47:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress/interview/docs/java/08-spring.html" class="prev">
        08-spring
      </a></span> <span class="next"><a href="/vuepress/interview/docs/java/10-dubbo.html">
        10-dubbo
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress/assets/js/app.0ab85dbf.js" defer></script><script src="/vuepress/assets/js/2.fa597f1f.js" defer></script><script src="/vuepress/assets/js/17.8376b68f.js" defer></script>
  </body>
</html>
